# http协议类

## http协议的主要特点

1. 简单快速：客户端每次向服务端请求时，只需要传送请求方法和路径
2. 灵活：http允许传输任何类型的数据对象，由content-type标记类型
3. 无连接：每次连接只会处理一个请求
4. 无状态：对事物处理没有记忆能力， 如： 后续处理需要用到前面的信息，则必须重传

## http报文的组成部分

### 请求报文

- 请求行
    Method + url + protocol version
    请求方法 + 请求目标 + 版本号组成
    GET / HTTP/1.1

- 请求头

key-value值，告知服务端我需要哪些内容

- 空行

请求头的内容已经晚了，后面开始的都是请求体了

- 请求体

### 响应报文

- 状态行，
版本号 状态码 原因
HTTP/1.1 200 OK

- 响应头
- 空行
- 响应体

## http方法

- GET 获取资源  幂等

- POST 传输资源

- PUT 修改资源 幂等

- DELETE 删除资源

- HEAD 获取报文

### post和get的区别

1. get 通过url传递参数，二post则放在request body中
2. get比post更不安全，因为get的参数是直接暴露在URL上，不能用来传递敏感信息
3. 对于参数类型，get只支持ascii码，而post没有限制
4. 对于参数的长度， get是有限制的
5. 对于请求的缓存，get请求，浏览器会主动缓存，而post需要手动缓存
6. 对于编码， get请求只能进行url编码，而post支持多种编码方式

### post和put的区别

1. put是幂等的，post是非幂等
2. put是直接覆盖已有数据，而post是添加

## http状态码

- 1xx 指示信息 - 表示请求已接受，继续处理
    1. 101 根据客户端的请求切换协议，主要用于websoket & http2.0

- 2xx 成功

- 3xx 重定向
    1. 301 请求的页面已经转移到新的url
    2. 302 请求的页面临时转移到新的url
    3. 304 协商缓存

- 4xx 客户端错误
    1. 400 请求参数错误
    2. 401 请求没有权限
    3. 403 禁止访问
    4. 404 资源不存在

- 5xx 服务器错误
    1. 500 服务器内部错误
    2. 501 服务器不具备完成请求的功能， eg： 无法识别请求方法
    3. 502 错误网关， 服务器从上游获取到无效的响应
    4. 503 服务器不可用
    5. 504 网关超时

## 什么是持久连接

普通连接，一次连接只能处理一个请求
当使用keep-alive模式（持久连接），使得客户端和服务端之间的连接持续有效，避免了重新建立连接

## 什么是管线化

在持久连接下，消息的传递类似于：
请求1 -> 响应1 -> 请求2 ->响应2 ->请求3 ->响应3

管线化：在持久连接下，把所有请求一次打包传输，所有响应打包一次传输回来
请求1 -> 请求2 -> 请求3 -> 响应1 -> 响应2 -> 响应3

### 管线化特点

1. 通过持久化连接完成，仅http/1.1支持此技术
2. 只有GET和HEAD请求可以进行管线化，post有所限制
3. 初次连接时，不应启动管线化，因为服务器不一定支持

4. 管线化不会影响响应的顺序
5. 服务端必须支持管线化
