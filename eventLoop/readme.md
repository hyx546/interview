## js 单线程
- js主要用途是：用户互动，和操作DOM
- 如果js有两个线程，一个线程在某个DOM节点添加内容，另一个线程删除这个节点，机会产生冲突，为了避免这个冲突，所以决定了它是单线程，否则会带来复杂的同步问题。
- 此外，h5提出Web Worker标准，允许js脚本创建多个线程（UI线程，异步http请求线程），但是子线程完全受主线程控制，并没有改变js单线程的本质


## 堆栈

- 栈（stack) 是自动分配内存空间，它由系统自动释放，特点是先进后出
- 队列的特点是先进先出


## 宏任务和微任务
  #### 宏任务
  - setTimeout setInterval setImmediate I/O

  - Promise.then 队列可以看成是一个宏任务

  #### 微任务
  - process.nextTick

- 同步代码先在栈中执行，执行完成后，微任务会先执行，宏任务再执行

- new Promise是立即执行的，它是同步的，


## 浏览器的机制是
  - 先走完栈里面的代码，才会走到队列里去。
  - 把then(异步)放到微任务里
  

